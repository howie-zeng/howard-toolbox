
<div style="font-family:'Times New Roman',Times,serif;line-height:1.6;color:#333;max-width:700px;font-size:16px;">
    <p>Subject: Overview: Core files for adding a new product (LMSim)</p>
<p>Hi Team,</p>
<p>To add a new product with transition and cashflow simulation, here are the key areas of the codebase to modify.</p>
<h3 style="margin-top:24px;margin-bottom:16px;font-weight:700;color:#2c3e50;">1. Asset Definition</h3>
<p><strong>Goal:</strong> Define inputs and normalize raw data.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMAsset/include/Asset.h</code>: Base fields.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMAsset/include/ResiAsset.h</code> / <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">.cpp</code>: Residential logic (extend this or <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">Asset</code>).
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMAsset/src/*Loader.cpp</code>: Input parsing (see <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">StacrLoader.cpp</code> for reference).</p>
<h3 style="margin-top:24px;margin-bottom:16px;font-weight:700;color:#2c3e50;">2. Cashflow Engine</h3>
<p><strong>Goal:</strong> Generate monthly cashflows from the asset.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMCashFlow/include/LoanCashFlow.h</code>: Data structures.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMCashFlow/src/*</code>: logic implementation.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMCashFlow/*Adaptor*</code>: The bridge between the asset and the model (e.g., <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">ResiAssetCashFlowAdaptor</code>).</p>
<h3 style="margin-top:24px;margin-bottom:16px;font-weight:700;color:#2c3e50;">3. Transition Model</h3>
<p><strong>Goal:</strong> Simulate state transitions (Current â†’ Prepaid/Default).
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMModel/include/TransSimple.h</code>: Main simulation loop.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMModel/include/TransState.h</code>: State definitions.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMModel/include/ResiModelVariable.h</code>: Model variables (predictors).
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMModel/ResiModelVariableLoader.cpp</code>: Loads model coefficients from files.</p>
<h3 style="margin-top:24px;margin-bottom:16px;font-weight:700;color:#2c3e50;">4. Wiring &amp; Execution</h3>
<p><strong>Goal:</strong> Hook it all together.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMModel/src/ModelFactory.cpp</code>: Logic to select the new model type.
*   <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">LMAssetVisitor/src/ResiAssetVisitor.cpp</code>: Instantiates and runs the model.</p>
<hr style="height:1px;background-color:#d0d7de;border:none;margin:24px 0;"/>
<h3 style="margin-top:24px;margin-bottom:16px;font-weight:700;color:#2c3e50;">Implementation Checklist</h3>
<ol style="padding-left:24px;margin-top:0;margin-bottom:16px;">
<li style="margin-bottom:4px;"><strong>Asset</strong>: Create/Update Loader &amp; Asset class.</li>
<li style="margin-bottom:4px;"><strong>Cashflow</strong>: Implement <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">CashFlowAdaptor</code> for the new product.</li>
<li style="margin-bottom:4px;"><strong>Model</strong>: Subclass <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">TransStateModel</code> (or reuse <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">TransSimple</code> if fits).</li>
<li style="margin-bottom:4px;"><strong>Factory</strong>: Register the new model in <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">ModelFactory</code>.</li>
<li style="margin-bottom:4px;"><strong>Config</strong>: Register new variables in <code style="background-color:rgba(175,184,193,0.2);border-radius:6px;padding:0.2em 0.4em;font-family:Consolas,Monaco,monospace;font-size:85%;">ResiModelVariableLoader</code>.</li>
</ol>
<p>Let me know if you need help with a specific component.</p>
<p>Best,
[Your Name]</p>
</div>
    